class Solution {
public:
    int largestRectangleArea(vector<int>& h) {
        //brute
    //     int n=h.size();
    //     int maxArea=0;

    //     for(int i=0;i<n;i++){
    //       int minm=h[i];
    //       for(int j=i;j<n;j++){
    //          minm=min(h[j],minm);
    //          int area=minm*(j-i+1);
    //          maxArea=max(area,maxArea);
    //       }
    //     }
    //     return maxArea; 

//optimal
    stack<int> st;
        int ans=0;
        h.push_back(0);
        for(int i=0;i<h.size();i++){
            while(!st.empty() && h[st.top()]>h[i]){                
                int top=h[st.top()];
                st.pop();
                int ran=st.empty()?-1:st.top();
                
                ans=max(ans,top*(i-ran-1));
                
            }
            st.push(i);
            
        }
        return ans;
     }
};
